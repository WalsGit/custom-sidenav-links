{"version":3,"sources":["webpack://@davwheat/custom-sidenav-links/webpack/bootstrap","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/components/Button']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['app']\"","webpack://@davwheat/custom-sidenav-links/./src/common/models/SideNavLink.ts","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/components/Switch']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/utils/extractText']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['components/ExtensionPage']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/Component']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/utils/saveSettings']\"","webpack://@davwheat/custom-sidenav-links/external \"flarum.core.compat['common/components/Modal']\"","webpack://@davwheat/custom-sidenav-links/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@davwheat/custom-sidenav-links/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@davwheat/custom-sidenav-links/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@davwheat/custom-sidenav-links/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@davwheat/custom-sidenav-links/./src/admin/components/Input.tsx","webpack://@davwheat/custom-sidenav-links/./src/admin/isValidUrl.ts","webpack://@davwheat/custom-sidenav-links/./src/admin/components/AddLinkModal.tsx","webpack://@davwheat/custom-sidenav-links/./src/admin/components/SettingsPage.tsx","webpack://@davwheat/custom-sidenav-links/./src/admin/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","SideNavLink","icon","text","url","internal","fromJsObject","obj","toString","JSON","stringify","this","toJSON","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","_defineProperty","configurable","writable","SettingValueInput","view","type","aria-labelled-by","attrs","labelId","className","placeholder","extractText","disabled","onchange","onChange","e","target","Component","isValidUrl","str","URL","_","protocol","hostname","includes","translate","data","app","translator","trans","AddLinkModal","title","content","validUrl","newLink","class","newValue","state","loading","isValid","getButtonText","trim","onsubmit","preventDefault","hide","links","push","Modal","settingsKey","FakeDataPage","settings","oninit","vnode","createData","rawLinkData","linkData","isAnyUrlInvalid","onclick","modal","show","makeDirty","id","map","link","data-column","length","confirm","splice","saveSettings","isDirty","json","rawData","freeze","parse","finalData","forEach","snl","alerts","clear","stringData","console","log","then","onSettingsSaved","ExtensionPage","initializers","add","extensionData","registerPage","SettingsPage"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['app'];","export interface SideNavLinkJSObject {\n  icon: string\n  text: string\n  url: string\n  internal: boolean\n}\n\nexport default class SideNavLink {\n  /**\n   * Create instance of SideNavLink\n   *\n   * @param icon FontAwesome icon classes (e.g. `fas fa-link`)\n   * @param text Link text (e.g. `My cool site`)\n   * @param url Link URL (e.g. `https://flarum.org/`)\n   * @param internal Is link within forum? (e.g. `false`)\n   */\n  constructor(public icon: string, public text: string, public url: string, public internal: boolean) {}\n\n  static fromJsObject(obj: SideNavLinkJSObject) {\n    return new SideNavLink(obj.icon, obj.text, obj.url, obj.internal)\n  }\n\n  public toString() {\n    return JSON.stringify({ icon: this.icon, text: this.text, url: this.url, internal: this.internal })\n  }\n\n  public toJSON() {\n    return { icon: this.icon, text: this.text, url: this.url, internal: this.internal }\n  }\n}\n","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['components/ExtensionPage'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/utils/saveSettings'];","module.exports = flarum.core.compat['common/components/Modal'];","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import Component from 'flarum/common/Component'\nimport extractText from 'flarum/common/utils/extractText'\n\nexport default class SettingValueInput extends Component {\n  view() {\n    return (\n      <input\n        type=\"text\"\n        aria-labelled-by={this.attrs.labelId}\n        className={`FormControl ${this.attrs.class}`}\n        placeholder={extractText(this.attrs.placeholder)}\n        disabled={!!this.attrs.disabled}\n        value={this.attrs.value}\n        onchange={this.onChange.bind(this)}\n      />\n    )\n  }\n\n  onChange(e: InputEvent) {\n    if (typeof this.attrs.onChange === 'function') {\n      // @ts-ignore\n      const target: HTMLInputElement = e.target\n      this.attrs.onChange(target.value, target)\n    }\n  }\n}\n","/**\n * Returns `true` if provided a valid URL, else `false`.\n *\n * A URL is considered valid if it...\n * - uses http or https protocols\n * - contains a `.` in the hostname\n * - is parsable with `new URL(...)`\n *\n * @param str URL string\n */\nexport default function isValidUrl(str: string) {\n  let url: URL\n\n  try {\n    url = new URL(str)\n  } catch (_) {\n    return false\n  }\n\n  return (url.protocol === 'http:' || url.protocol === 'https:') && url.hostname.includes('.')\n}\n","import Modal from 'flarum/common/components/Modal'\n\nimport Button from 'flarum/common/components/Button'\nimport Switch from 'flarum/common/components/Switch'\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator'\nimport Input from './Input'\n\nimport extractText from 'flarum/common/utils/extractText'\n\nimport SideNavLink from '../../common/models/SideNavLink'\nimport isValidUrl from '../isValidUrl'\n\nconst translate = (key: string, data?: Record<string, unknown>): string[] =>\n  app.translator.trans(`davwheat.custom_sidenav_links.admin.settings_page.new_link_modal.${key}`, data)\n\nexport default class AddLinkModal extends Modal {\n  private loading = false\n  private newLink: SideNavLink = new SideNavLink('', '', '', false)\n\n  // constructor(public links: SideNavLink[]) {\n  //   super()\n  // }\n\n  className() {\n    return 'davwheat-sidenav-AddLinkModal Modal--small'\n  }\n\n  title() {\n    return translate('title')\n  }\n\n  content() {\n    const validUrl = isValidUrl(this.newLink.url)\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form\">\n          <div className=\"Form-group\">\n            <div>\n              <label>\n                {translate('labels.icon')}\n                <div class=\"icon-preview-container\">\n                  <span class={`icon-preview fa-fw ${this.newLink.icon}`} title={translate('table.icon_preview_tooltip')} />\n                  <Input\n                    value={this.newLink.icon}\n                    onChange={(newValue: string) => {\n                      this.newLink.icon = newValue\n                    }}\n                    placeholder={translate('placeholders.icon')}\n                    disabled={false}\n                  />\n                </div>\n              </label>\n            </div>\n\n            <div>\n              <label>\n                {translate('labels.text')}\n                <Input\n                  value={this.newLink.text}\n                  onChange={(newValue: string) => {\n                    this.newLink.text = newValue\n                  }}\n                  placeholder={translate('placeholders.text')}\n                  disabled={false}\n                />\n              </label>\n            </div>\n\n            <div>\n              <label>\n                {translate('labels.url')}\n                <Input\n                  class={!validUrl && 'sidenav-input--invalid'}\n                  value={this.newLink.url}\n                  onChange={(newValue: string) => {\n                    this.newLink.url = newValue\n                  }}\n                  placeholder={translate('placeholders.url')}\n                  disabled={false}\n                />\n              </label>\n            </div>\n\n            <div>\n              <Switch\n                state={this.newLink.internal}\n                onchange={(newValue: boolean) => {\n                  this.newLink.internal = newValue\n                }}\n                disabled={false}\n              >\n                {translate('labels.internal')}\n              </Switch>\n            </div>\n\n            <Button className=\"Button Button--primary\" type=\"submit\" disabled={!validUrl || this.loading || !this.isValid()} loading={this.loading}>\n              {this.getButtonText(validUrl)}\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  getButtonText(validUrl: boolean): string[] {\n    if (!validUrl) return translate('submit_btn.fix_url')\n    if (this.loading) return translate('submit_btn.loading')\n    if (!this.isValid()) return translate('submit_btn.invalid_form')\n\n    return translate('submit_btn.add')\n  }\n\n  isValid() {\n    return this.newLink.icon.trim() !== '' && this.newLink.text.trim() !== '' && this.newLink.url.trim() !== ''\n  }\n\n  onsubmit(e) {\n    e.preventDefault()\n\n    this.loading = true\n    this.hide.bind(this)()\n\n    this.attrs.links.push(this.newLink)\n  }\n}\n","import app from 'flarum/app'\nimport ExtensionPage from 'flarum/components/ExtensionPage'\n\nimport Button from 'flarum/common/components/Button'\nimport Switch from 'flarum/common/components/Switch'\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator'\nimport Input from './Input'\n\nimport saveSettings from 'flarum/common/utils/saveSettings'\nimport extractText from 'flarum/common/utils/extractText'\n\nimport { default as SideNavLink, SideNavLinkJSObject } from '../../common/models/SideNavLink'\nimport isValidUrl from '../isValidUrl'\nimport AddLinkModal from './AddLinkModal'\n\nconst settingsKey = `davwheat-custom-sidenav-links.link-data`\n\nconst translate = (key: string, data?: Record<string, unknown>): string[] =>\n  app.translator.trans(`davwheat.custom_sidenav_links.admin.settings_page.${key}`, data)\n\nexport default class FakeDataPage extends ExtensionPage {\n  private settings = {}\n  private loading = false\n  private isDirty = false\n  private isAnyUrlInvalid = false\n\n  /**\n   * IMPORTANT: Only evaluated on first draw! Edits to the link data are only performed to `this.linkData`.\n   */\n  private rawLinkData: string = app.data.settings['davwheat-custom-sidenav-links.link-data']\n  private linkData: SideNavLink[] | null = null\n\n  oninit(vnode) {\n    super.oninit(vnode)\n\n    this.createData()\n  }\n\n  content() {\n    // Non-existant\n    if (!this.rawLinkData) {\n      return (\n        <p>\n          My settings key (<code>{settingsKey}</code>) is missing from your database! Make sure you've run the migrations. If that doesn't work, add it to your\n          settings table manually with the content <code>[]</code>.\n        </p>\n      )\n    } else if (!this.linkData) {\n      return (\n        <div class=\"davwheat-ext-settings\">\n          <form>\n            <LoadingIndicator />\n          </form>\n        </div>\n      )\n    }\n\n    let isAnyUrlInvalid = false\n\n    return (\n      <div class=\"davwheat-ext-settings\">\n        <form>\n          <section class=\"davwheat-sidenav-addlink\">\n            <h2>{translate('heading')}</h2>\n            <Button\n              class=\"Button davwheat-sidenav-addlink-btn\"\n              icon=\"fas fa-plus\"\n              onclick={() => {\n                app.modal.show(AddLinkModal, { links: this.linkData })\n                this.makeDirty()\n              }}\n            >\n              {translate('add_link_btn')}\n            </Button>\n          </section>\n\n          <div class=\"scroll-container\">\n            <main>\n              <div id=\"davwheat-sidenav--position-heading\">{translate('table.header.position')}</div>\n              <div id=\"davwheat-sidenav--icon-heading\">{translate('table.header.icon')}</div>\n              <div id=\"davwheat-sidenav--text-heading\">{translate('table.header.text')}</div>\n              <div id=\"davwheat-sidenav--url-heading\">{translate('table.header.url')}</div>\n              <div id=\"davwheat-sidenav--internal-heading\">{translate('table.header.internal')}</div>\n              <div id=\"davwheat-sidenav--delete-heading\">{translate('table.header.delete')}</div>\n\n              {this.linkData.map((link, i) => {\n                const validUrl = isValidUrl(link.url)\n                if (!validUrl) isAnyUrlInvalid = true\n\n                return [\n                  <div data-column=\"position\">\n                    <Button\n                      class=\"Button Button--icon\"\n                      icon=\"fas fa-arrow-up\"\n                      title={translate('table.tooltips.move_up')}\n                      disabled={i === 0}\n                      onclick={() => {\n                        if (i === 0) return\n\n                        let temp = link\n                        this.linkData[i] = this.linkData[i - 1]\n                        this.linkData[i - 1] = link\n                      }}\n                    />\n                    <Button\n                      class=\"Button Button--icon\"\n                      icon=\"fas fa-arrow-down\"\n                      title={translate('table.tooltips.move_down')}\n                      disabled={i === (this.linkData?.length || 1) - 1}\n                      onclick={() => {\n                        if (i === (this.linkData?.length || 1) - 1) return\n\n                        let temp = link\n                        this.linkData[i] = this.linkData[i + 1]\n                        this.linkData[i + 1] = link\n                      }}\n                    />\n                  </div>,\n                  <div data-column=\"icon\">\n                    <span class={`icon-preview fa-fw ${link.icon}`} title={translate('table.tooltips.icon_preview')} />\n                    <Input\n                      value={link.icon}\n                      onChange={(newValue: string) => {\n                        this.linkData[i].icon = newValue\n                        this.makeDirty()\n                      }}\n                      labelId=\"davwheat-sidenav--icon-heading\"\n                      placeholder={translate('table.placeholders.icon')}\n                      disabled={false}\n                    />\n                  </div>,\n                  <div data-column=\"text\">\n                    <Input\n                      value={link.text}\n                      onChange={(newValue: string) => {\n                        this.linkData[i].text = newValue\n                        this.makeDirty()\n                      }}\n                      labelId=\"davwheat-sidenav--text-heading\"\n                      placeholder={translate('table.placeholders.text')}\n                      disabled={false}\n                    />\n                  </div>,\n                  <div data-column=\"url\">\n                    <Input\n                      class={!validUrl && 'sidenav-input--invalid'}\n                      value={link.url}\n                      onChange={(newValue: string) => {\n                        this.linkData[i].url = newValue\n                        this.makeDirty()\n                      }}\n                      labelId=\"davwheat-sidenav--url-heading\"\n                      placeholder={translate('table.placeholders.url')}\n                      disabled={false}\n                    />\n                  </div>,\n                  <div data-column=\"internal\">\n                    <Switch\n                      state={link.internal}\n                      onchange={(newValue: boolean) => {\n                        this.linkData[i].internal = newValue\n                        this.makeDirty()\n                      }}\n                      aria-labelled-by=\"davwheat-sidenav--url-heading\"\n                      disabled={false}\n                    />\n                  </div>,\n                  <div data-column=\"delete\">\n                    <Button\n                      class=\"Button Button--icon\"\n                      icon=\"fas fa-trash\"\n                      aria-labelled-by=\"davwheat-sidenav--delete-heading\"\n                      onclick={() => {\n                        if (confirm(extractText(translate('confirm_delete', { link: link.text })))) {\n                          // Remove this link\n                          this.linkData?.splice(i, 1)\n                        }\n                      }}\n                    />\n                  </div>,\n                ]\n              })}\n            </main>\n          </div>\n\n          <Button\n            onclick={this.saveSettings.bind(this)}\n            className=\"Button Button--primary\"\n            loading={this.loading}\n            disabled={isAnyUrlInvalid || !this.isDirty || this.loading}\n          >\n            {this.getButtonText(isAnyUrlInvalid)}\n          </Button>\n        </form>\n      </div>\n    )\n  }\n\n  private getButtonText(isAnyUrlInvalid: boolean): string[] {\n    this.isAnyUrlInvalid = isAnyUrlInvalid\n\n    if (this.isAnyUrlInvalid) return translate('save_btn.fix_errors')\n    if (this.loading) return translate('save_btn.saving')\n    if (this.isDirty) return translate('save_btn.dirty')\n\n    return translate('save_btn.saved')\n  }\n\n  createData(): void {\n    const rawData = this.rawLinkData\n    let json: SideNavLinkJSObject[]\n\n    try {\n      json = Object.freeze(JSON.parse(rawData))\n    } catch {\n      throw `Invalid JSON found in Flarum setting \\`${settingsKey}\\`. We can't continue. Fix manually, or reset to \\`[]\\` in your DB.`\n    }\n\n    let finalData: SideNavLink[] = []\n\n    json.forEach(snl => finalData.push(SideNavLink.fromJsObject(snl)))\n\n    this.linkData = finalData\n  }\n\n  makeDirty() {\n    this.isDirty = true\n  }\n\n  saveSettings(e: MouseEvent) {\n    e.preventDefault()\n\n    if (this.isAnyUrlInvalid) {\n      app.alerts.show({ type: 'error' }, translate('alert.fix_errors'))\n      return\n    }\n\n    app.alerts.clear()\n    this.loading = true\n\n    const stringData = JSON.stringify(this.linkData)\n    console.log(stringData)\n\n    return saveSettings({ [settingsKey]: JSON.stringify(this.linkData) }).then(this.onSettingsSaved.bind(this))\n  }\n\n  onSettingsSaved(): void {\n    this.loading = false\n    this.isDirty = false\n\n    app.alerts.show({ type: 'success' }, app.translator.trans('core.admin.settings.saved_message'))\n  }\n}\n","import SettingsPage from './components/SettingsPage'\n\napp.initializers.add('davwheat/custom-sidenav-links', app => {\n  // Debug line\n  // app.data.settings['davwheat-custom-sidenav-links.link-data'] = `[{\"icon\":\"icon1\",\"text\":\"text1\",\"url\":\"url1\",\"internal\":true}]`\n\n  app.extensionData.for('davwheat-custom-sidenav-links').registerPage(SettingsPage)\n})\n"],"sourceRoot":""}